@tailwind base;
@tailwind components;
@tailwind utilities;

/* ─── Dark theme (default) ─────────────────────────────────── */
:root {
  --surface:          #0d0d0d;
  --surface-raised:   #141414;
  --surface-overlay:  #1a1a1a;
  --surface-border:   #2a2a2a;
  --accent:           #00d4aa;
  --accent-muted:     rgba(0, 212, 170, 0.2);

  /* Bull/Bear — also as space-separated RGB triples for Tailwind opacity modifiers */
  --bull:     #00d4aa;
  --bull-rgb: 0, 212, 170;
  --bear:     #ff4d6d;
  --bear-rgb: 255, 77, 109;

  --text-primary: #e8e8e8;
  --text-muted:   #666;

  /* Chart */
  --grid-line:  #1a1a1a;
  --chart-text: #6b7280;

  color-scheme: dark;
}

/* ─── Light theme ───────────────────────────────────────────── */
html[data-theme="light"] {
  --surface:         #f3f4f6;
  --surface-raised:  #ffffff;
  --surface-overlay: #f0f1f3;
  --surface-border:  #e2e4e9;
  --accent:          #00b894;
  --accent-muted:    rgba(0, 184, 148, 0.15);
  --text-primary:    #111827;
  --text-muted:      #6b7280;

  /* Chart — lighter grid so it doesn't overpower white bg */
  --grid-line:  #f0f0f0;
  --chart-text: #9ca3af;

  color-scheme: light;
}

/* ─── Light mode text overrides ────────────────────────────── */
/* Tailwind's neutral-* and text-white are hardcoded, so override here */
html[data-theme="light"] { color: #111827; }
html[data-theme="light"] .text-white       { color: #111827 !important; }
html[data-theme="light"] .text-neutral-100 { color: #1f2937 !important; }
html[data-theme="light"] .text-neutral-200 { color: #1f2937 !important; }
html[data-theme="light"] .text-neutral-300 { color: #374151 !important; }
html[data-theme="light"] .text-neutral-400 { color: #6b7280 !important; }
html[data-theme="light"] .text-neutral-500 { color: #9ca3af !important; }
html[data-theme="light"] .text-neutral-600 { color: #d1d5db !important; }
html[data-theme="light"] .text-neutral-700 { color: #e5e7eb !important; }
/* Inputs and form elements */
html[data-theme="light"] input,
html[data-theme="light"] textarea { color: #111827 !important; }
html[data-theme="light"] input::placeholder { color: #9ca3af !important; }
/* Font-mono code blocks */
html[data-theme="light"] .font-mono { color: #1f2937; }

/* ─── Base ─────────────────────────────────────────────────── */
html, body {
  background: var(--surface);
  color: var(--text-primary);
  font-family: 'Inter', system-ui, sans-serif;
  min-height: 100vh;
}

/* ─── Scrollbars ────────────────────────────────────────────── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--surface-border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #3a3a3a; }

/* ─── Widget shell ──────────────────────────────────────────── */
.widget {
  @apply bg-surface-raised border border-surface-border rounded-xl overflow-hidden flex flex-col;
}

.widget-header {
  @apply flex items-center justify-between px-4 py-2 border-b border-surface-border text-xs font-semibold uppercase tracking-wider;
  color: var(--text-muted);
}

/* ─── React Grid Layout ─────────────────────────────────────── */
.react-grid-item.react-grid-placeholder {
  background: var(--accent);
  opacity: 0.1;
  border-radius: 12px;
}

.react-resizable-handle {
  opacity: 0;
  transition: opacity 0.2s;
}

.react-grid-item:hover .react-resizable-handle {
  opacity: 0.5;
}

/* ─── TradingView / lightweight-charts watermark ────────────── */
/* Hide the TradingView logo that appears in the bottom-right of charts */
a[href*="tradingview"],
[class*="tv-watermark"],
[class*="tv-logo"] {
  display: none !important;
}
/* Lightweight-charts v4 watermark element */
.tv-lightweight-charts__watermark { display: none !important; }

/* ─── Topbar logo: black in light mode ───────────────────────── */
html[data-theme="light"] .logo-img {
  filter: brightness(0);
}

/* ─── Light mode: subtle topbar button backgrounds ───────────── */
html[data-theme="light"] .topbar-btn {
  background: transparent;
  border-color: transparent;
  color: #6b7280;
}
html[data-theme="light"] .topbar-btn:hover {
  background: rgba(0,0,0,0.06);
  border-color: #d1d5db;
  color: #111827;
}

/* ─── Light mode: AI widget input + chips ────────────────────── */
html[data-theme="light"] .ai-input {
  background: #ffffff !important;
  border-color: #d1d5db !important;
}
html[data-theme="light"] .ai-chip {
  background: #ffffff !important;
  border-color: #d1d5db !important;
  color: #374151 !important;
}
html[data-theme="light"] .ai-chip:hover {
  border-color: var(--accent) !important;
  color: var(--accent) !important;
}
